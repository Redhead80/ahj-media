!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);(new class{constructor(){this.container=document.getElementById("widget"),this.addTicket=this.addTicket.bind(this),this.elem=null}createWidget(){const e=document.createElement("div");e.classList.add("widget-container"),e.innerHTML='\n    <div class="list"></div>\n    <div class="footer">\n      <form class="form">\n        <input class="form-input" name="input" type="text">\n      </form>\n    </div>\n            ',this.container.appendChild(e),document.querySelector(".form").addEventListener("submit",this.addTicket)}addTicket(e){e.preventDefault(),this.elem=document.createElement("span"),this.elem.textContent=e.target.input.value,this.getPosition()}getPosition(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:n}=e.coords;this.showTicket(t.toFixed(5),n.toFixed(5))},e=>{this.showModal(),console.error(e)})}resetInput(){this.container.querySelector(".form-input").value=""}showTicket(e,t){const n=document.querySelector(".list"),i=document.createElement("div");i.classList.add("ticket"),i.innerHTML=`\n       <div class="elem"></div>\n       <div class="date">${(new Date).toLocaleString()}</div>\n       <div class="geo">[${e},${t}]</div>\n    `,n.insertAdjacentElement("afterbegin",i),this.container.querySelector(".elem").insertAdjacentElement("afterbegin",this.elem),this.resetInput()}showModal(){const e=document.createElement("div");e.classList.add("modal"),e.innerHTML='\n      <div class="modal-text">Что-то пошло не так  \n      <p>Извините, но мы не можем определить ваше местоположение, \n      пожалуйста, дайте нам разрешение на использование геолокации \n      либо введите координаты вручную\n      </p>\n      <p>Широта и долгота через запятую</p>\n      <form class="modal-form">\n        <input class="modal-input" name="modal" type="text">\n        <div class="buttons">\n        <button type="reset" class="reset">Отмена</button>\n        <button type="submit" class="ok">Ok</button>\n        </div>\n      </form>\n      </div>\n    ',this.container.querySelector(".widget-container").appendChild(e),this.container.querySelector(".modal-input").addEventListener("input",this.deleteError),this.container.querySelector(".modal-form").addEventListener("submit",e=>{e.preventDefault();let t=this.checkValidity(e.target.modal.value);if(console.log(t),t){t=t[0].split(",");const e=t[0].trim(),n=t[1].trim();this.hideModal(),this.showTicket(e,n)}else alert("Координаты введены не верно")}),this.container.querySelector(".modal-form").addEventListener("reset",e=>{e.preventDefault(),this.hideModal()})}hideModal(){this.container.querySelector(".modal").remove(),this.resetInput()}checkValidity(e){return e.match(/^\[?\d+\.\d+,\s?\-?\d+\.\d+\]?$/gm)}}).createWidget()}]);